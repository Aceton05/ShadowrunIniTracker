# ShadowrunInitracker
Bookmarklet to add an initiativ tracker to your current website

<a href="javascript:function renderFrame(){var a=document.createElement("div");a.style="position: absolute; box-sizing: border-box; font-size: 12px; z-index: 999; bottom: 1%; right: 1%; width: auto; height: auto; display:inline-block; border: 2px solid; background-color: lightgrey;";var b=document.createElement("input");b.style="width: 80px;",b.id="ini-input";var c=document.createElement("button");c.innerHTML="Hizuf\xFCgen",c.setAttribute("onclick","addUser()"),c.id="ini-input-btn";var d=document.createElement("div");d.id="ini-names";var e=document.createElement("div");e.style="width: 260px",e.id="btns";var f=document.createElement("button");f.innerHTML="Alle minus 10",f.setAttribute("onclick","reduceAll()"),a.append(b),a.append(c),a.append(d),a.append(e),a.append(f),document.body.append(a)}function addUser(){var a=document.getElementById("ini-input").value;document.getElementById("ini-names").appendChild(createNewPlayer(a)),document.getElementById("ini-input").value=""}function addToMe(a){if(1>a.title.length){for(var b=document.getElementsByName("playername"),c=[],d=0;d<b.length;d++)b[d].children[0].checked&&(c.push(b[d].children[1].innerHTML),b[d].children[0].checked=!1);a.title=c.join("\n"),a.style="border-color: blue; width: 25px;"}else a.style="border-color: red; width: 25px;"}function createNewPlayer(a){var b=document.createElement("div");b.id=a,b.setAttribute("name","playername");var c=document.createElement("input");c.setAttribute("type","checkbox");var d=document.createElement("label");d.innerHTML=a;var e=document.createElement("input");e.style="width: 20px;";var f=document.createElement("button");f.setAttribute("onclick","changeValue(this)"),f.innerHTML="+";var g=document.createElement("button");return g.setAttribute("onclick","changeValue(this)"),g.innerHTML="-",b.append(c),b.append(d),b.append(e),b.append(f),b.append(g),b}function renderBtns(){for(i=1;40>=i;i++){var a=document.createElement("button");a.innerHTML=i,a.setAttribute("onclick","addToMe(this)"),a.setAttribute("name","ini-btn"),a.style="width: 25px; box-sizing: border-box;",document.getElementById("btns").appendChild(a)}}function reduceAll(){for(var a=Array.from(document.getElementsByName("ini-btn")),b=[],c=0;c<a.length;c++)0<a[c].title.length&&b.push(a[c]);for(var c=0;c<b.length;c++){var d=b[c],e=a.find(a=>a.innerHTML==d.innerHTML-10);e!=null&&(e.title=d.title,e.style="border-color: blue; width: 25px; box-sizing: border-box;"),d.title="",d.style="width: 25px; box-sizing: border-box;"}}function changeValue(a){var b=a.parentElement.id,c=Array.from(document.getElementsByName("ini-btn")),d=c.find(a=>a.title.includes(b)),e=parseInt(a.parentElement.children[2].value);if("+"==a.innerText){var f=c.find(a=>a.innerHTML==parseInt(d.innerHTML)+e);f!=null&&(f.title+="\n"+b,f.style="border-color: blue; width: 25px; box-sizing: border-box;"),d.title=d.title.replace(b,""),1>d.title.trim().length&&(d.style="width: 25px; box-sizing: border-box;",d.title="")}else{var f=c.find(a=>a.innerHTML==parseInt(d.innerHTML)-e);f==null&&(f=c.find(a=>"40"==a.innerHTML)),f.title+="\n"+b,f.style="border-color: blue; width: 25px; box-sizing: border-box;",d.title=d.title.replace(b,""),1>d.title.trim().length&&(d.style="width: 25px; box-sizing: border-box;",d.title="")}}renderFrame(),renderBtns();">
    Bookmarklet
  </a>